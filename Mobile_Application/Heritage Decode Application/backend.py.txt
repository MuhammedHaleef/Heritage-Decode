from flask import Flask, request, jsonify
import base64
from PIL import Image
from io import BytesIO

app = Flask(__name__)

@app.route('/receive_image', methods=['POST'])
def receive_image():
    try:
        # Get image data from request
        data = request.get_json()
        base64_image = data['image']
        
        # Decode base64 image
        image_bytes = base64.b64decode(base64_image)
        image = Image.open(BytesIO(image_bytes))
        
        # Process image (in this case, just printing its size)
        width, height = image.size
        print(f"Received image with size: {width}x{height}")
        
        return jsonify({'success': True})
    except Exception as e:
        print(f"Error: {e}")
        return jsonify({'success': False, 'error': str(e)})

if __name__ == '__main__':
    app.run(debug=True)
